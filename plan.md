# ìº˜ë¦°ë” Export ê¸°ëŠ¥ êµ¬í˜„ ê³„íš

## ê°œìš”
ì‚¬ìš©ìê°€ íˆ¬í‘œ ê²°ê³¼ ì¤‘ ì›í•˜ëŠ” ë‚ ì§œ/ì‹œê°„ì„ ì„ íƒí•˜ì—¬ ë³¸ì¸ ìº˜ë¦°ë”ë¡œ exportí•˜ëŠ” ê¸°ëŠ¥

## ê¸°ìˆ  ê²°ì •ì‚¬í•­
- **êµ¬í˜„ ë°©ì‹**: BE API ìˆ˜ì • + FE ì—°ë™
- **í‘œì‹œ ë²”ìœ„**: ëª¨ë“  bestSlots í‘œì‹œ
- **íƒ€ì… ì§€ì›**: TIME + ALL_DAY ë‘˜ ë‹¤ ì§€ì›
- **TDD**: ì ìš© (Red-Green-Refactor)

---

## Backend (time2gather-be)

### Phase 1: Export API Query Parameter ì§€ì›

#### 1.1 API ìŠ¤í™
```
GET /api/v1/meetings/{meetingCode}/export
GET /api/v1/meetings/{meetingCode}/export?date=2024-02-15&slotIndex=9
GET /api/v1/meetings/{meetingCode}/export?date=2024-02-15&slotIndex=-1  # ALL_DAY
```

#### 1.2 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

- [x] íŒŒë¼ë¯¸í„° ì—†ì´ í˜¸ì¶œ ì‹œ ê¸°ì¡´ ë™ì‘ ìœ ì§€ (bestSlot ì²«ë²ˆì§¸ ì„ íƒ)
- [x] date + slotIndex íŒŒë¼ë¯¸í„°ë¡œ íŠ¹ì • ì‹œê°„ëŒ€ ICS ìƒì„±
- [x] ALL_DAY ì¼€ì´ìŠ¤ (slotIndex = -1) ì •ìƒ ì²˜ë¦¬
- [x] ì˜ëª»ëœ date í˜•ì‹ â†’ 400 Bad Request
- [x] Meetingì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‚ ì§œ â†’ 400 Bad Request
- [x] dateë§Œ ìˆê³  slotIndexê°€ ì—†ëŠ” ê²½ìš° â†’ 400 Bad Request

---

## Frontend (time2gather-fe)

### Phase 2: API Service ì¶”ê°€

- [x] meetings.tsì— getExportUrl í•¨ìˆ˜ ì¶”ê°€
- [x] meetings.tsì— timeToSlotIndex í•¨ìˆ˜ ì¶”ê°€

### Phase 3: CalendarExportDialog ì»´í¬ë„ŒíŠ¸ ìƒì„±

- [x] Radix UI Dialog ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [x] bestSlotsë¥¼ ë¼ë””ì˜¤ ë²„íŠ¼ìœ¼ë¡œ í‘œì‹œ
- [x] TIME íƒ€ì…: ë‚ ì§œ + ì‹œê°„ í‘œì‹œ
- [x] ALL_DAY íƒ€ì…: ë‚ ì§œ + "ì¢…ì¼" í‘œì‹œ
- [x] ì„ íƒ í›„ ICS ë‹¤ìš´ë¡œë“œ íŠ¸ë¦¬ê±°

### Phase 4: ResultButtons ìˆ˜ì •

- [x] "ë‚´ ìº˜ë¦°ë”ë¡œ ì˜®ê¸°ê¸°" ë²„íŠ¼ ì¶”ê°€
- [x] Dialog ìƒíƒœ ê´€ë¦¬ ë° ì—°ë™

### Phase 5: i18n ë²ˆì—­ ì¶”ê°€

- [x] ko.json ë²ˆì—­ ì¶”ê°€
- [x] en.json ë²ˆì—­ ì¶”ê°€

### Phase 6: ë¹Œë“œ ê²€ì¦

- [x] FE TypeScript ë¹Œë“œ ì„±ê³µ (npm run build)

---

## ì™„ë£Œ ì¡°ê±´

- [x] BE: ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³¼
- [x] FE: ê²°ê³¼ í˜ì´ì§€ì—ì„œ ìº˜ë¦°ë” export ë²„íŠ¼ ë™ì‘
- [x] iOS Safariì—ì„œ ICS íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ìº˜ë¦°ë” ì•± ì—°ë™ í™•ì¸
- [ ] Android Chromeì—ì„œ ICS íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ìº˜ë¦°ë” ì•± ì—°ë™ í™•ì¸

---
---

# Function Calling ê¸°ë°˜ ì¼ì • ì±—ë´‡ êµ¬í˜„ í”Œëœ

## ê°œìš”

time2gather ì•±ì— Function Calling ê¸°ë°˜ ì¼ì • ì¡°íšŒ ì±—ë´‡ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

### ê²°ì • ì‚¬í•­

| í•­ëª© | ê²°ì • |
|------|------|
| ì ‘ê·¼ ìœ„ì¹˜ | í”Œë¡œíŒ… ë²„íŠ¼ (ëª¨ë“  í˜ì´ì§€ì—ì„œ ì ‘ê·¼) |
| ì¡°íšŒ ë²”ìœ„ | í˜¸ìŠ¤íŠ¸ + ì°¸ì—¬í•œ ë¯¸íŒ… ëª¨ë‘ |
| ëŒ€í™” íˆìŠ¤í† ë¦¬ | ì„¸ì…˜ ë‚´ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€ (30ë¶„ TTL) |
| ì±—ë´‡ í†¤ | ì •ì¤‘í•œ ì¡´ëŒ“ë§ |
| UI ìŠ¤íƒ€ì¼ | ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ |
| MVP ë²”ìœ„ | ì¡°íšŒë§Œ (ì¶”í›„ ìƒì„±/ìˆ˜ì • í™•ì¥) |
| ì¸ì¦ | ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì‚¬ìš© ê°€ëŠ¥ |

### ê¸°ìˆ  ìŠ¤íƒ

- **Spring AI**: 1.0.0-M6 (í˜„ì¬ ì‚¬ìš©ì¤‘)
- **Tool Calling**: `@Tool` ì–´ë…¸í…Œì´ì…˜ ë°©ì‹ (Spring AI 1.0.x ì§€ì›)
- **ì„¸ì…˜ ê´€ë¦¬**: InMemory (ConcurrentHashMap + TTL)
- **OpenAI ëª¨ë¸**: gpt-3.5-turbo ì´ìƒ (Function Calling ì§€ì›)

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (ëª¨ë“  í˜ì´ì§€)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ FloatingChatBot â”‚ â† í”Œë¡œíŒ… ë²„íŠ¼ (ìš°í•˜ë‹¨)               â”‚
â”‚  â”‚  â”œâ”€ ChatWindow  â”‚                                    â”‚
â”‚  â”‚  â”‚   â”œâ”€ MessageList (ëŒ€í™” íˆìŠ¤í† ë¦¬)                   â”‚
â”‚  â”‚  â”‚   â””â”€ InputBox                                     â”‚
â”‚  â”‚  â””â”€ sessionId ê´€ë¦¬ (localStorage)                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼ POST /api/v1/chat
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ChatControllerâ”‚ â†’ â”‚ ChatService â”‚ â†’ â”‚ OpenAI API â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚                    â”‚       â”‚
â”‚         â–¼                  â–¼                    â–¼       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Tool Calling   â”‚
â”‚  â”‚@CurrentUser  â”‚  â”‚ChatSession    â”‚           â”‚        â”‚
â”‚  â”‚(JWT ì¸ì¦)    â”‚  â”‚Store (30m TTL)â”‚           â–¼        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                       â”‚MeetingQuery   â”‚ â”‚
â”‚                                       â”‚Tools (@Tool)  â”‚ â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚          â”‚
â”‚                                              â–¼          â”‚
â”‚                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                       â”‚Repositories   â”‚ â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Backend êµ¬í˜„

### Phase 1: ê¸°ë°˜ êµ¬ì¡°

#### 1-1. DTO ìƒì„±

- [x] `api/chat/dto/ChatRequest.java`
- [x] `api/chat/dto/ChatResponse.java`

#### 1-2. ChatController

- [x] `api/chat/ChatController.java`
- [x] `test/api/chat/ChatControllerTest.java`
- [x] `test/config/security/WithMockJwtUser.java` (í…ŒìŠ¤íŠ¸ í—¬í¼)
- [x] `test/config/security/WithMockJwtUserSecurityContextFactory.java`

#### 1-3. ChatService ì¸í„°í˜ì´ìŠ¤

- [x] `domain/chat/ChatService.java`

---

### Phase 2: ì„¸ì…˜ ê´€ë¦¬ (SKIPPED - Statelessë¡œ ì§„í–‰)

> MVPì—ì„œëŠ” Statelessë¡œ ì§„í–‰í•˜ì—¬ í† í° ë¹„ìš© ì ˆì•½ ë° êµ¬í˜„ ë‹¨ìˆœí™”.
> ì¶”í›„ ëŒ€í™” ë¬¸ë§¥ ìœ ì§€ê°€ í•„ìš”í•˜ë©´ Redis ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬ ì¶”ê°€ ì˜ˆì •.

---

### Phase 3: Repository í™•ì¥

#### 3-1. MeetingRepository ì¿¼ë¦¬ ë©”ì„œë“œ ì¶”ê°€

- [x] `findByHostUserIdAndIsActiveTrue`
- [x] `findAllByIdIn`
- [x] `findAllByIdInAndIsActiveTrue`

#### 3-2. MeetingUserSelectionRepository ì¿¼ë¦¬ ë©”ì„œë“œ ì¶”ê°€

- [x] `findAllByUserId` (ì´ë¯¸ ìˆìŒ)

#### 3-3. MeetingQueryService êµ¬í˜„

- [x] `domain/chat/MeetingQueryService.java`
- [x] `test/domain/chat/MeetingQueryServiceTest.java`

---

### Phase 4: Tool Calling

#### 4-1. MeetingQueryTools ì •ì˜

- [x] `getAllMeetings` - ì‚¬ìš©ìì˜ ëª¨ë“  ë¯¸íŒ… ì¡°íšŒ
- [x] `searchMeetingsByTitle` - ì œëª©ìœ¼ë¡œ ê²€ìƒ‰
- [x] `getMeetingCount` - ë¯¸íŒ… ê°œìˆ˜ ì¡°íšŒ
- [x] `getUpcomingMeetings` - ë‹¤ê°€ì˜¤ëŠ” ë¯¸íŒ… ì¡°íšŒ
- [x] `getPastMeetings` - ì§€ë‚œ ë¯¸íŒ… ì¡°íšŒ
- [x] `getMeetingDetail` - ë¯¸íŒ… ìƒì„¸ ì¡°íšŒ
- [x] `getMeetingParticipants` - ì°¸ì„ì ì¡°íšŒ
- [x] `getMeetingStats` - í†µê³„ ì¡°íšŒ

#### 4-2. ChatClient ì„¤ì •

- [x] `config/ChatClientConfig.java` â†’ ChatServiceImplì—ì„œ ChatClient.Builder ì§ì ‘ ì‚¬ìš©

#### 4-3. ChatService êµ¬í˜„

- [x] `domain/chat/ChatServiceImpl.java`
- [x] `test/domain/chat/ChatServiceImplTest.java`

---

### Phase 5: í†µí•© í…ŒìŠ¤íŠ¸

- [x] ChatController í†µí•© í…ŒìŠ¤íŠ¸ (`integration/ChatIntegrationTest.java`)
- [x] Tool Calling E2E í…ŒìŠ¤íŠ¸ (Mock ChatClient ì‚¬ìš©)

---

## Frontend êµ¬í˜„

### Phase 6: ì±—ë´‡ UI

#### 6-1. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/components/ChatBot/
â”œâ”€â”€ FloatingChatButton.tsx
â”œâ”€â”€ ChatWindow.tsx
â”œâ”€â”€ MessageList.tsx
â”œâ”€â”€ MessageBubble.tsx
â”œâ”€â”€ ChatInput.tsx
â””â”€â”€ ChatBot.module.scss
```

#### 6-2. ìƒíƒœ ê´€ë¦¬

- [x] ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ useStateë¡œ ê´€ë¦¬ (ë³„ë„ store ë¶ˆí•„ìš”)

#### 6-3. API ì„œë¹„ìŠ¤

- [x] `services/chat.ts`

#### 6-4. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

- [x] ChatBot.tsx (FloatingButton + ChatWindow + Messages + Input í†µí•©)

#### 6-5. Layout ì—°ë™

- [x] Layout.astroì— ChatBot ì¶”ê°€

#### 6-6. ìŠ¤íƒ€ì¼ë§

- [x] ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ (ChatBot.module.scss)
- [x] ëª¨ë°”ì¼ ë°˜ì‘í˜•

#### 6-7. i18n

- [x] ko.json ë²ˆì—­ ì¶”ê°€
- [x] en.json ë²ˆì—­ ì¶”ê°€

#### 6-8. ë¹Œë“œ ê²€ì¦

- [x] FE TypeScript ë¹Œë“œ ì„±ê³µ (npm run build)

---

## ì˜ˆìƒ ì‘ì—…ëŸ‰

| Phase | ì˜ˆìƒ ì‹œê°„ |
|-------|----------|
| Phase 1-2 (BE ê¸°ë°˜) | 2-3ì‹œê°„ |
| Phase 3 (Repository) | 1-2ì‹œê°„ |
| Phase 4 (Tool Calling) | 3-4ì‹œê°„ |
| Phase 5 (BE í…ŒìŠ¤íŠ¸) | 1-2ì‹œê°„ |
| Phase 6 (FE) | 3-4ì‹œê°„ |
| **ì´ê³„** | **10-15ì‹œê°„** |

---

## ì˜ˆì‹œ ëŒ€í™”

```
ì‚¬ìš©ì: ë‹¤ìŒì£¼ ë‚´ ì¼ì • ë­ì•¼?

ì±—ë´‡: ë‹¤ìŒì£¼ ì¼ì •ì„ í™•ì¸í•´ë“œë¦´ê²Œìš”.

ğŸ“… ë‹¤ìŒì£¼ ì˜ˆì •ëœ ë¯¸íŒ… (2ê°œ)

1. **í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„ ë¯¸íŒ…**
   - 1ì›” 20ì¼ (ì›”) 14:00
   - ì°¸ì„ì 5ëª…
   
2. **íŒ€ íšŒì‹**
   - 1ì›” 22ì¼ (ìˆ˜) ì €ë…
   - ì°¸ì„ì 8ëª… ì¤‘ 6ëª… ì‘ë‹µ

ë‹¤ë¥¸ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”!
```

---

## ì¶”í›„ í™•ì¥ (Phase 2)

MVP ì™„ë£Œ í›„ ì¶”ê°€í•  ê¸°ëŠ¥:

- ë¯¸íŒ… ìƒì„±/ìˆ˜ì • Tools
- ì•Œë¦¼ ê¸°ëŠ¥
- RAG í™•ì¥ (ë¯¸íŒ… ë©”ëª¨ ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰)
